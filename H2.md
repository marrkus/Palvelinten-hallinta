## Tehtävänanto:
h2.
a) Gittiä livenä: Tee ohjeet ja skriptit, joilla saat live-USB -tikun konfiguroitua hetkessä – ohjelmat asennettua ja asetukset tehtyä.

b) Kokeile Puppetin master-slave arkkitehtuuria kahdella koneella. Liitä raporttiisi listaus avaimista (sudo puppet cert list) ja pätkä herran http-lokista (sudo tail -5 /var/log/puppet/masterhttp.log).
http://terokarvinen.com/2017/aikataulu-palvelinten-hallinta-ict4tn022-3-5-op-uusi-ops-loppusyksy-2017-p5

Aloitin työvaiheen 02.11.2017 klo 13.00.
Käytössäni labrakone HP ProDesk 600 G3 MT, jossa on live-USB -tikku, jossa on Xubuntu 16.04 käyttöjärjestelmä.

### Scriptin tekeminen

A) Lähdin katsomaan ohjeita [Tero Karvisen](http://terokarvinen.com/2017/aikataulu-palvelinten-hallinta-ict4tn022-3-5-op-uusi-ops-loppusyksy-2017-p5) sivuilta scriptin tekoon. Löysin sieltä kurssilaisen jo valmiiksi tehdyn [scriptin](https://github.com/poponappi/essential-tools) ja lähdin muokkaamaan sitä itselleni. Katsoin kurssilaisen [scriptiä raakaversiona](https://raw.githubusercontent.com/marrkus/Palvelinten-hallinta/master/script.sh) ja ryhdyin muokkaamaan sitä.

Loin uuden tiedoston minun GitHubin repositoryyn, johon annoin nimeksi script.sh. Kopioin kurssilaisen scriptin raakaversion sinne ja ryhdyin muokkaamaan sitä. [Oma versioni scriptistä](https://raw.githubusercontent.com/marrkus/Palvelinten-hallinta/master/script.sh) on seuraavanlainen:

```
echo "***************************"
echo " "
echo "Hello $USER"
echo " "
echo "***************************"
sudo timedatectl set-timezone Europe/Helsinki
setxkbmap fi
sudo apt update
sudo apt install -y git tree puppet gimp

git clone https://github.com/marrkus/ssh-for-puppet.git

cd ssh-for-puppet/Puppet/modules
sudo cp -r ssh/ /etc/puppet/modules/
cd /etc/puppet/

sudo puppet apply --modulepath modules/ -e 'class {"ssh":}'

cd

echo "***************************"
echo " "
echo "Ready to use"
echo " "
echo "***************************"
```


Scripti tekee seuraavaa:
  * tulostaa käyttäjän nimen
  * siirtää kellon suomen aikaan ja asettaa suomenkielisen näppäimistön
  * hakee päivitykset ja asentaa ohjelmat: git, tree, puppet ja gimp
  * cloonaa minun tekemäni SSH Puppet modulin minun tekemästä GitHub repositorysta
  * ajaa SSH modulin (asentaa sen ja toimii portissa 8888).

Lisäsin seuraavaksi [minun GitHub](https://github.com/marrkus/Palvelinten-hallinta) README kohtaan ohjeet scriptin käytöstä. Avataan Linuxin terminaali ja annetaan seuraavat komennot:
```
wget https://raw.githubusercontent.com/marrkus/Palvelinten-hallinta/master/script.sh
```
```
bash script.sh
```
Nämä kaksi komentoa ajavat scriptin.
Lopetin työvaiheen klo 14.15.

B)
